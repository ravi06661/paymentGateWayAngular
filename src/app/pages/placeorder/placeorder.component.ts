import { Component, OnInit } from '@angular/core';
import { NgForm } from '@angular/forms';
import { PayemtserviceService } from 'src/app/service/payemtservice.service';
// import * as Razorpay from 'razorpay`'

declare var Razorpay: any;
@Component({
  selector: 'app-placeorder',
  templateUrl: './placeorder.component.html',
  styleUrls: ['./placeorder.component.scss']
})
export class PlaceorderComponent implements OnInit {

  amount = 100;
  orderForm: any;
  ngOnInit(): void {
    throw new Error('Method not implemented.');
  }
  constructor(private paymentService: PayemtserviceService) { }

  public createTransactionAndPlaceOrder(orderForm: NgForm) {
    this.paymentService.createpayment(this.amount).subscribe(
      (data) => {
        console.log(data);
        this.openTransactionModel(data,orderForm);

      }, (error) => {
        console.log(error);

      })
  }
  public openTransactionModel(response: any,orderForm:NgForm) {

    var options = {
      order_id: response.order_id,
      key: response.key,
      amount: response.amount,
      currency: response.currency,
      name: 'Ravi Singh',
      description: 'Payment of order',
      image: 'data:image/jpeg;base64,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',

      handler: (response: any) => {
        if (response != null && response.razorpay_payment_id != null) {
          this.processResponse(response,orderForm);
        }else{
          alert('Payment failed')
        }

      },
      prefill: {
        name: 'Ravi',
        email: 'ravi@gmail.com',
        contact: '9898979789'
      },
      notes: {
        address: 'online order'
      },
      theme: {
        color: '#F37254'
      }
    };
    var razorpayObject = new Razorpay(options)
    razorpayObject.open();


  }
  processResponse(resp: any,orderForm:NgForm) {
    console.log(resp);
    

  }
}
